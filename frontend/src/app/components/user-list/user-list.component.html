<div class="container">
  <h2>{{ editingUser ? 'Editar Usuário' : 'Novo Usuário' }}</h2>

  <div *ngIf="message" [ngClass]="messageType === 'success' ? 'message success' : 'message error'">
    {{ message }}
  </div>

  <form [formGroup]="userForm" (ngSubmit)="onSubmit()">
    <div class="form-group">
      <label for="nome">Nome:</label>
      <input id="nome" formControlName="nome" placeholder="Nome completo">
      <div *ngIf="userForm.get('nome')?.invalid && userForm.get('nome')?.touched" class="error-message">
        Nome é obrigatório.
      </div>
    </div>

    <div class="form-group">
      <label for="email">Email:</label>
      <input id="email" type="email" formControlName="email" placeholder="exemplo@email.com">
      <div *ngIf="userForm.get('email')?.invalid && userForm.get('email')?.touched" class="error-message">
        <span *ngIf="userForm.get('email')?.errors?.['required']">Email é obrigatório.</span>
        <span *ngIf="userForm.get('email')?.errors?.['email']">Formato de email inválido.</span>
      </div>
    </div>

    <div class="form-actions">
      <button type="submit" [disabled]="userForm.invalid">
        {{ editingUser ? 'Atualizar' : 'Salvar' }}
      </button>
      <button type="button" (click)="onCancel()" *ngIf="editingUser">
        Cancelar Edição
      </button>
    </div>
  </form>

  <hr>

  <h2>Lista de Usuários</h2>
  <table>
    <thead>
      <tr>
        <th>ID</th>
        <th>Nome</th>
        <th>Email</th>
        <th>Data de Criação</th>
        <th>Ações</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let user of users">
        <td>{{ user.id }}</td>
        <td>{{ user.nome }}</td>
        <td>{{ user.email }}</td>
        <td>{{ user.dataCriacao | date: 'dd/MM/yyyy HH:mm' }}</td>
        <td>
          <button (click)="onEdit(user)">Editar</button>
          <button (click)="onDelete(user.id)" class="delete-btn">Excluir</button>
        </td>
      </tr>
      <tr *ngIf="users.length === 0">
        <td colspan="5">Nenhum usuário cadastrado.</td>
      </tr>
    </tbody>
  </table>
</div>
